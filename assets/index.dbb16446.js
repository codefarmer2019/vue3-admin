var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,s=(a,t,l)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l,u=(e,a)=>{for(var t in a||(a={}))n.call(a,t)&&s(e,t,a[t]);if(l)for(var t of l(a))o.call(a,t)&&s(e,t,a[t]);return e},i=(e,l)=>a(e,t(l));import{p as c,b as d,c as r,e as m,w as p,v as f,f as y,h as b,aa as h,ab as v,a6 as g,ac as k,ad as _,ae as O,af as P,ag as C,ah as w,ai as I,d as K,S as L,R as x,l as F,m as T,aj as j,ak as M,k as S,s as V,al as A,z as E,X as R,F as q,g as D,t as U,K as B,B as H,i as z,a5 as G,a0 as J,A as N,V as W,am as $,an as Q,ao as X,ap as Y,aq as Z,ar as ee,as as ae,at as te,Q as le,au as ne,av as oe,L as se,aw as ue,ax as ie,ay as ce,az as de,aA as re,aB as me,M as pe,aC as fe,aD as ye,aE as be,r as he,aF as ve}from"./vendor.922b9a96.js";import{_ as ge}from"./logo.d49f8590.js";import{u as ke,s as _e,T as Oe,r as Pe}from"./index.2bd215b2.js";import{I as Ce}from"./icon-font.3924d9f1.js";const we={name:"Index",props:{collapsed:{type:Boolean}}},Ie=b();c("data-v-ae0e8c2c");const Ke={class:"logo"},Le=y("img",{src:ge,alt:""},null,-1),xe={class:"title"};d();const Fe=Ie(((e,a,t,l,n,o)=>(r(),m("div",Ke,[Le,p(y("h2",xe,"One Piece",512),[[f,!t.collapsed]])]))));we.render=Fe,we.__scopeId="data-v-ae0e8c2c";var Te={[h.name]:h,[h.TabPane.name]:h.TabPane,[v.name]:v,[g.name]:g,MinusOutlined:k,DownOutlined:_,ReloadOutlined:O,CloseOutlined:P,VerticalRightOutlined:C,VerticalLeftOutlined:w,ColumnWidthOutlined:I},je=K({name:"TabsView",components:u({},Te),setup(){const e=L(),a=x(),t=ke(),l=e=>{const{fullPath:a,hash:t,meta:l,name:n,params:o,path:s,query:u}=e;return{fullPath:a,hash:t,meta:l,name:n,params:o,path:s,query:u}};let n=[];try{const a=_e.get(Oe);n=a?JSON.parse(a):[l(e)]}catch(p){n=[l(e)]}t.commit("tabsView/initTabs",n);const o=F({activeKey:e.fullPath}),s=()=>{var l,n;if(e.meta.keepAlive){const o=null==(n=null==(l=a.currentRoute.value.matched.find((a=>a.name==e.name)))?void 0:l.components)?void 0:n.default.name;o&&(t.state.asyncRoute.keepAliveComponents=t.state.asyncRoute.keepAliveComponents.filter((e=>e!=o)))}},c=T((()=>t.state.tabsView.tabsList));j((()=>e.fullPath),(()=>{const e=[];c.value.forEach((t=>{a.hasRoute(t.name)||e.push(t.name)})),e.length&&t.commit("tabsView/initTabs",c.value.filter((a=>!e.includes(a.name))))}));const d=["Redirect","login"];j((()=>e.fullPath),((a,n)=>{d.includes(e.name)||(o.activeKey=a,t.commit("tabsView/addTabs",l(e)))}),{immediate:!0}),window.addEventListener("beforeunload",(()=>{_e.set(Oe,JSON.stringify(c.value))}));const r=e=>{if(1===c.value.length)return V.warning("这已经是最后一页，不能再关闭了！");if(s(),t.commit("tabsView/closeCurrentTab",e),o.activeKey===e.fullPath){const e=c.value[Math.max(0,c.value.length-1)];o.activeKey=e.fullPath,a.push(e)}},m=()=>{s(),a.push({path:"/redirect"+A(e).fullPath})};M("reloadPage",m);return i(u({},S(o)),{route:e,tabsList:c,changePage:e=>{o.activeKey=e,a.push(e)},editTabItem:(e,a)=>{"remove"==a&&r(c.value.find((a=>a.fullPath==e)))},removeTab:r,closeLeft:(e,l)=>{t.commit("tabsView/closeLeftTabs",e),o.activeKey=e.fullPath,a.replace(e.fullPath)},closeRight:(e,l)=>{t.commit("tabsView/closeRightTabs",e),o.activeKey=e.fullPath,a.replace(e.fullPath)},closeOther:e=>{t.commit("tabsView/closeOtherTabs",e),o.activeKey=e.fullPath,a.replace(e.fullPath)},closeAll:()=>{localStorage.removeItem("routes"),t.commit("tabsView/closeAllTabs"),a.replace("/")},reloadPage:m})}});const Me=b();c("data-v-4b35bf8e");const Se={class:"tabs-view"},Ve={style:{display:"inline-block"}},Ae=z(" 刷新 "),Ee=z(" 关闭 "),Re=z(" 关闭左侧 "),qe=z(" 关闭右侧 "),De=z(" 关闭其他 "),Ue=z(" 关闭全部 "),Be=z(" 刷新 "),He=z(" 关闭 "),ze=z(" 关闭其他 "),Ge=z(" 关闭全部 "),Je={class:"tabs-view-content"};d();const Ne=Me(((e,a,t,l,n,o)=>{const s=E("reload-outlined"),u=E("a-menu-item"),i=E("close-outlined"),c=E("a-menu-divider"),d=E("vertical-right-outlined"),p=E("vertical-left-outlined"),f=E("column-width-outlined"),b=E("minus-outlined"),h=E("a-menu"),v=E("a-dropdown"),g=E("a-tab-pane"),k=E("down-outlined"),_=E("a-tabs"),O=E("router-view"),P=E("a-card");return r(),m("div",Se,[y(_,{activeKey:e.activeKey,"onUpdate:activeKey":a[4]||(a[4]=a=>e.activeKey=a),"hide-add":"",type:"editable-card",class:"tabs",onChange:e.changePage,onEdit:e.editTabItem},{tabBarExtraContent:Me((()=>[y(v,{trigger:["click"]},{overlay:Me((()=>[y(h,{style:{"user-select":"none"}},{default:Me((()=>[y(u,{key:"1",disabled:e.activeKey!==e.route.fullPath,onClick:e.reloadPage},{default:Me((()=>[y(s),Be])),_:1},8,["disabled","onClick"]),y(u,{key:"2",onClick:a[2]||(a[2]=a=>e.removeTab(e.route))},{default:Me((()=>[y(i),He])),_:1}),y(c),y(u,{key:"5",onClick:a[3]||(a[3]=a=>e.closeOther(e.route))},{default:Me((()=>[y(f),ze])),_:1}),y(u,{key:"6",onClick:e.closeAll},{default:Me((()=>[y(b),Ge])),_:1},8,["onClick"])])),_:1})])),default:Me((()=>[y("a",{class:"ant-dropdown-link",onClick:a[1]||(a[1]=R((()=>{}),["prevent"]))},[y(k,{style:{fontSize:"20px"}})])])),_:1})])),default:Me((()=>[(r(!0),m(q,null,D(e.tabsList,((a,t)=>(r(),m(g,{key:a.fullPath},{tab:Me((()=>[y(v,{trigger:["contextmenu"]},{overlay:Me((()=>[y(h,{style:{"user-select":"none"}},{default:Me((()=>[y(u,{key:"1",disabled:e.activeKey!==a.fullPath,onClick:e.reloadPage},{default:Me((()=>[y(s),Ae])),_:2},1032,["disabled","onClick"]),y(u,{key:"2",onClick:t=>e.removeTab(a)},{default:Me((()=>[y(i),Ee])),_:2},1032,["onClick"]),y(c),y(u,{key:"3",onClick:l=>e.closeLeft(a,t)},{default:Me((()=>[y(d),Re])),_:2},1032,["onClick"]),y(u,{key:"4",onClick:l=>e.closeRight(a,t)},{default:Me((()=>[y(p),qe])),_:2},1032,["onClick"]),y(c),y(u,{key:"5",onClick:t=>e.closeOther(a)},{default:Me((()=>[y(f),De])),_:2},1032,["onClick"]),y(u,{key:"6",onClick:e.closeAll},{default:Me((()=>[y(b),Ue])),_:1},8,["onClick"])])),_:2},1024)])),default:Me((()=>[y("div",Ve,U(a.meta.title),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1},8,["activeKey","onChange","onEdit"]),y("div",Je,[y(P,null,{default:Me((()=>[y(O,null,{default:Me((({Component:e})=>[(r(),m(B,null,[(r(),m(H(e)))],1024))])),_:1})])),_:1})])])}));je.render=Ne,je.__scopeId="data-v-4b35bf8e";var We=K({name:"MenuItem",components:{IconFont:Ce,"a-sub-menu":G.SubMenu,"a-menu-item":G.Item},props:{menuInfo:{type:Object,default:()=>({})}}});We.render=function(e,a,t,l,n,o){var s;const u=E("icon-font"),i=E("a-menu-item"),c=E("menu-item",!0),d=E("a-sub-menu");return e.menuInfo.meta.hidden?W("",!0):(r(),m(q,{key:0},[(null==(s=e.menuInfo.children)?void 0:s.length)?(r(),m(d,J({key:0,key:e.menuInfo.name},e.$attrs),{title:N((()=>[y("span",null,[y(u,{style:{color:"aliceblue"},type:e.menuInfo.meta.icon},null,8,["type"]),y("span",null,U(e.menuInfo.meta.title),1)])])),default:N((()=>[(r(!0),m(q,null,D(e.menuInfo.children,(e=>(r(),m(q,{key:e.name},[e.children?(r(),m(c,{key:e.name,"menu-info":e},null,8,["menu-info"])):(r(),m(i,{key:e.name},{default:N((()=>[y(u,{style:{color:"aliceblue"},type:e.meta.icon},null,8,["type"]),y("span",null,U(e.meta.title),1)])),_:2},1024))],64)))),128))])),_:1},16)):(r(),m(i,{key:e.menuInfo.name},{default:N((()=>[y(u,{style:{color:"aliceblue"},type:e.menuInfo.meta.icon},null,8,["type"]),y("span",null,U(e.menuInfo.meta.title),1)])),_:1}))],64))};var $e=K({name:"Menu",components:{MenuItem:We,"a-sub-menu":G.SubMenu,"a-menu-item":G.Item,MenuFoldOutlined:$,MenuUnfoldOutlined:Q,PieChartOutlined:X,MailOutlined:Y,DesktopOutlined:Z,InboxOutlined:ee,AppstoreOutlined:ae},props:{collapsed:{type:Boolean}},setup(e){const a=L(),t=x(),l=ke(),n=()=>{var e;return[null==(e=a.matched[1])?void 0:e.name]},o=F({openKeys:n(),selectedKeys:[a.name]}),s=T((()=>{var e;return null!=(e=l.getters["asyncRoute/menus"])?e:Pe.find((e=>"Layout"==e.name)).children}));j((()=>e.collapsed),(e=>{o.openKeys=e?[]:n(),o.selectedKeys=[a.name]})),j((()=>a.fullPath),(()=>{"login"==a.name||e.collapsed||(o.openKeys=n(),o.selectedKeys=[a.name])}));return i(u({},S(o)),{menus:s,clickMenuItem:({item:e,key:a,keyPath:l})=>{/http(s)?:/.test(a)?window.open(a):t.push({name:a})}})}});$e.render=function(e,a,t,l,n,o){const s=E("menu-item"),u=E("a-menu");return r(),m(u,{"open-keys":e.openKeys,"onUpdate:open-keys":a[1]||(a[1]=a=>e.openKeys=a),"selected-keys":e.selectedKeys,"onUpdate:selected-keys":a[2]||(a[2]=a=>e.selectedKeys=a),mode:"inline",theme:"dark","inline-collapsed":e.collapsed,onClick:e.clickMenuItem},{default:N((()=>[(r(!0),m(q,null,D(e.menus,(e=>(r(),m(s,{key:e.name,"menu-info":e},null,8,["menu-info"])))),128))])),_:1},8,["open-keys","selected-keys","inline-collapsed","onClick"])};var Qe={[te.Header.name]:te.Header,[le.name]:le,[G.name]:G,[ne.name]:ne,[G.Divider.name]:G.Divider,SettingOutlined:oe,Dropdown:v,LockOutlined:se,GithubOutlined:ue,SearchOutlined:ie,[ce.name]:ce,[ce.Item.name]:ce.Item,MenuFoldOutlined:$,MenuUnfoldOutlined:Q,FullscreenOutlined:de,FullscreenExitOutlined:re,PoweroffOutlined:me},Xe=K({name:"PageHeader",components:u({},Qe),props:{collapsed:{type:Boolean}},setup(){var e;const a=ke(),t=F({username:null==(e=a.getters["user/userInfo"])?void 0:e.username,fullscreenIcon:"FullscreenOutlined"}),l=x(),n=L();document.addEventListener("fullscreenchange",(()=>t.fullscreenIcon=null!==document.fullscreenElement?"FullscreenExitOutlined":"FullscreenOutlined"));const o=[{icon:"SearchOutlined",tips:"搜索"},{icon:"GithubOutlined",tips:"github",eventObject:{click:()=>window.open("https://github.com/buqiyuan/vue3-antd")}},{icon:"SettingOutlined",tips:"网站设置"},{icon:"LockOutlined",tips:"锁屏",eventObject:{click:()=>a.commit("lockscreen/setLock",!0)}}];return i(u({},S(t)),{iconList:o,toggleFullScreen:()=>{document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():document.documentElement.requestFullscreen()},doLogout:()=>{pe.confirm({title:"您确定要退出登录吗？",icon:y(fe),onOk:()=>{a.dispatch("user/logout").then((e=>{V.success("成功退出登录"),localStorage.removeItem(Oe),l.replace({name:"login",query:{redirect:n.fullPath}}).finally((()=>location.reload()))}))}})},route:n})}});const Ye=b();c("data-v-7006b6b6");const Ze={class:"left-options"},ea={class:"right-options"},aa=y("a",{href:"javascript:;"},"个人中心",-1),ta=z(" 退出登录");d();const la=Ye(((e,a,t,l,n,o)=>{const s=E("router-link"),u=E("a-menu-item"),i=E("a-menu"),c=E("a-breadcrumb-item"),d=E("a-breadcrumb"),p=E("a-tooltip"),f=E("a-avatar"),b=E("a-menu-divider"),h=E("poweroff-outlined"),v=E("Dropdown"),g=E("ALayoutHeader");return r(),m(g,{class:"layout-header"},{default:Ye((()=>[y("div",Ze,[y("span",{class:"menu-fold",onClick:a[1]||(a[1]=()=>e.$emit("update:collapsed",!e.collapsed))},[(r(),m(H(e.collapsed?"menu-unfold-outlined":"menu-fold-outlined")))]),y(d,null,{default:Ye((()=>[(r(!0),m(q,null,D(e.route.matched,(e=>(r(),m(c,{key:e.name},{overlay:Ye((()=>[e.children.length?(r(),m(i,{key:0},{default:Ye((()=>[(r(!0),m(q,null,D(e.children,(e=>(r(),m(q,null,[e.meta.hidden?W("",!0):(r(),m(u,{key:e.name},{default:Ye((()=>[y(s,{to:{name:e.name}},{default:Ye((()=>[z(U(e.meta.title),1)])),_:2},1032,["to"])])),_:2},1024))],64)))),256))])),_:2},1024)):W("",!0)])),default:Ye((()=>[y("a",null,U(e.meta.title),1)])),_:2},1024)))),128))])),_:1})]),y("div",ea,[(r(!0),m(q,null,D(e.iconList,(e=>(r(),m(p,{key:e.icon.name,placement:"bottom"},{title:Ye((()=>[y("span",null,U(e.tips),1)])),default:Ye((()=>[(r(),m(H(e.icon),ye(e.eventObject||{}),null,16))])),_:2},1024)))),128)),(r(),m(H(e.fullscreenIcon),{onClick:e.toggleFullScreen},null,8,["onClick"])),y(v,null,{overlay:Ye((()=>[y(i,null,{default:Ye((()=>[y(u,null,{default:Ye((()=>[aa])),_:1}),y(b),y(u,null,{default:Ye((()=>[y("a",{onClick:a[2]||(a[2]=R(((...a)=>e.doLogout&&e.doLogout(...a)),["prevent"]))},[y(h),ta])])),_:1})])),_:1})])),default:Ye((()=>[y(f,null,{default:Ye((()=>[z(U(e.username),1)])),_:1})])),_:1})])])),_:1})}));Xe.render=la,Xe.__scopeId="data-v-7006b6b6";var na="_page_footer_18xo3_1",oa="_page_footer_link_18xo3_7",sa="_copyright_18xo3_15";const{Footer:ua}=te;var ia=K({name:"PageFooter",components:{ALayoutFooter:ua},setup:()=>()=>y(q,null,[y(E("a-layout-footer"),{class:na},{default:()=>[y("div",{class:oa},[y("a",{href:"https://github.com/vuejs/vue-next",target:"_blank"},[z("vue 3.0")]),y("a",{href:"https://github.com/buqiyuan",target:"_blank"},[y(ue,null,null)]),y("a",{href:"https://github.com/vueComponent/ant-design-vue",target:"_blank"},[" ",z("ant-design-vue 2.0")])]),y("div",{class:sa},[z("Copyright "),y(be,null,null),z(" 2020")," ",y("a",{href:"https://buqiyuan.gitee.io",target:"_blank"},[z("buqiyuan.gitee.io")])])]})])}),ca=K({name:"Layout",components:{TabsView:je,PageHeader:Xe,AsideMenu:$e,Logo:we,PageFooter:ia,[te.name]:te,[te.Content.name]:te.Content,[te.Sider.name]:te.Sider},setup(){const e=he(!1),a=T((()=>e.value?"80px":"256px"));return{collapsed:e,testMsg:()=>{V.success(ve("span","啥子"),2)},asiderWidth:a}}});const da=b(),ra=da(((e,a,t,l,n,o)=>{const s=E("logo"),u=E("aside-menu"),i=E("a-layout-sider"),c=E("page-header"),d=E("tabs-view"),p=E("a-layout-content"),f=E("page-footer"),b=E("a-layout");return r(),m(b,{class:"layout"},{default:da((()=>[y(i,{collapsed:e.collapsed,"onUpdate:collapsed":a[1]||(a[1]=a=>e.collapsed=a),trigger:null,collapsible:"",class:"layout-sider"},{default:da((()=>[y(s,{collapsed:e.collapsed},null,8,["collapsed"]),y(u,{collapsed:e.collapsed},null,8,["collapsed"])])),_:1},8,["collapsed"]),y(b,null,{default:da((()=>[y(c,{collapsed:e.collapsed,"onUpdate:collapsed":a[2]||(a[2]=a=>e.collapsed=a)},null,8,["collapsed"]),y(p,{class:"layout-content"},{default:da((()=>[y(d)])),_:1}),y(f)])),_:1})])),_:1})}));ca.render=ra,ca.__scopeId="data-v-b01b0c40";export default ca;
