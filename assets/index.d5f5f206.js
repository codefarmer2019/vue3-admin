var e=Object.defineProperty,a=Object.defineProperties,o=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,s=(a,o,r)=>o in a?e(a,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[o]=r;import{d as t,N as i,L as d,l as u,R as p,S as m,k as c,s as f,p as g,b,z as v,c as y,e as w,f as h,h as I,i as O}from"./vendor.2480f8af.js";import{_,u as j}from"./index.cd0348b8.js";import{_ as S}from"./logo.d49f8590.js";var x=t({name:"Login",components:{UserOutlined:i,LockOutlined:d,SvgIcon:_},setup(){const e=u({loading:!1,formInline:{username:"",password:""}}),t=j(),i=p(),d=m();return g=((e,a)=>{for(var o in a||(a={}))n.call(a,o)&&s(e,o,a[o]);if(r)for(var o of r(a))l.call(a,o)&&s(e,o,a[o]);return e})({},c(e)),a(g,o({handleSubmit:async()=>{var a;const{username:o,password:r}=e.formInline;if(""==o.trim()||""==r.trim())return f.warning("用户名或密码不能为空！");f.loading("登录中...",0),e.loading=!0;const n={username:o,password:r},{code:l,message:s}=await t.dispatch("user/login",n).finally((()=>{e.loading=!1,f.destroy()}));if(0==l){const e=decodeURIComponent((null==(a=d.query)?void 0:a.redirect)||"/");f.success("登录成功！"),i.replace(e).then((e=>{"login"==d.name&&i.replace("/")}))}else f.info(s||"登录失败")}}));var g}});const z=I();g("data-v-447e9eb8");const P={class:"login-box"},k=h("div",{class:"login-logo"},[h("img",{src:S,alt:""}),h("h1",null,"Antd Admin")],-1),U=O(" 登录 ");b();const L=z(((e,a,o,r,n,l)=>{const s=v("user-outlined"),t=v("a-input"),i=v("a-form-item"),d=v("lock-outlined"),u=v("a-button"),p=v("a-form");return y(),w("div",P,[k,h(p,{layout:"horizontal",model:e.formInline,onSubmit:e.handleSubmit},{default:z((()=>[h(i,null,{default:z((()=>[h(t,{value:e.formInline.username,"onUpdate:value":a[1]||(a[1]=a=>e.formInline.username=a),size:"large",placeholder:"admin"},{prefix:z((()=>[h(s,{type:"user"})])),_:1},8,["value"])])),_:1}),h(i,null,{default:z((()=>[h(t,{value:e.formInline.password,"onUpdate:value":a[2]||(a[2]=a=>e.formInline.password=a),size:"large",type:"password",placeholder:"123456",autocomplete:"new-password"},{prefix:z((()=>[h(d,{type:"user"})])),_:1},8,["value"])])),_:1}),h(i,null,{default:z((()=>[h(u,{type:"primary","html-type":"submit",size:"large",loading:e.loading,block:""},{default:z((()=>[U])),_:1},8,["loading"])])),_:1})])),_:1},8,["model","onSubmit"])])}));x.render=L,x.__scopeId="data-v-447e9eb8";export default x;
