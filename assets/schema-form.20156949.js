var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,l=(t,a,r)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[a]=r,u=(e,t)=>{for(var a in t||(t={}))o.call(t,a)&&l(e,a,t[a]);if(r)for(var a of r(t))n.call(t,a)&&l(e,a,t[a]);return e};import{s as i,l as s,aR as m,aU as c,aV as f,al as d,aW as p,aX as v,aY as g,aZ as b,a_ as h,d as y,a9 as O,a$ as j,b0 as _,m as I,A as S,c as w,e as V,a2 as k,aF as F,B as x,f as A,F as P,g as E,i as T,t as R,b1 as U,a5 as C,aa as M,b2 as L,b3 as q,b4 as z,a4 as $,r as D,b5 as G,b6 as Y,b7 as B,h as N,C as W,a3 as X,Y as Z}from"./vendor.c1c0e565.js";import{e as H,f as J,i as K}from"./index.afeb46f0.js";function Q(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?Object(arguments[t]):{},r=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),r.forEach((function(t){ee(e,t,a[t])}))}return e}function ee(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function te(){return(te=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function ae(e){var t=!1;return e&&e.length&&e.every((function(e){return!e.required||(t=!0,!1)})),t}function re(e){return null==e?[]:Array.isArray(e)?e:[e]}function oe(e,t,a){for(var r=e,o=(t=(t=t.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split("."),n=0,l=o.length;n<l-1&&(r||a);++n){var u=o[n];if(!(u in r)){if(a)throw new Error("please transfer a valid name path to validate!");break}r=r[u]}return{o:r,k:o[n],v:r?r[o[n]]:null,isValid:r&&o[n]in r}}function ne(e,t,a){var r=i(e),o={};Object.keys(t).forEach((function(e){o[e]={autoLink:!1,required:ae(t[e])}})),o=s(o);var n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t.length?e.filter((function(e){var a=re(e.trigger||"change");return h(a,t).length})):e},l=null,u=function(e,t,a,r){var n=c([e],t,a,Q({validateMessages:f},r),!!r.validateFirst);return o[e].validateStatus="validating",n.catch((function(e){return e})).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];"validating"===o[e].validateStatus&&(o[e].validateStatus=t.length?"error":"success",o[e].help=t[0])})),n},y=function(a,r){var o=[],i=!0;a?o=Array.isArray(a)?a:[a]:(i=!1,o=Object.keys(t));var s=function(a){for(var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0,i=[],s={},m=function(l){var m=a[l],c=oe(e,m,o);if(!c.isValid)return"continue";s[m]=c.v;var f=n(t[m],re(r&&r.trigger));f.length&&i.push(u(m,c.v,f,r||{}).then((function(){return{name:m,errors:[]}})).catch((function(e){return Promise.reject({name:m,errors:e})})))},c=0;c<a.length;c++)m(c);var f=g(i);l=f;var d=f.then((function(){return l===f?Promise.resolve(s):Promise.reject([])})).catch((function(e){var t=e.filter((function(e){return e&&e.errors.length}));return Promise.reject({values:s,errorFields:t,outOfDate:l!==f})}));return d.catch((function(e){return e})),d}(o,r||{},i);return s.catch((function(e){return e})),s},O=r,j=function(e){var a=[];Object.keys(t).forEach((function(t){var r=oe(e,t,!1),o=oe(O,t,!1);b(r.v,o.v)||a.push(t)})),y(a,{trigger:"change"}),O=i(e)},_=null==a?void 0:a.debounce;return d(e,_&&_.wait?p(j,_.wait,v(_,["wait"])):j,{immediate:a&&!!a.immediate,deep:!0}),d(t,(function(){a&&a.validateOnRuleChange&&y()}),{deep:!0}),{modelRef:e,rulesRef:t,initialModel:r,validateInfos:o,resetFields:function(a){te(e,Q({},i(r),a)),m((function(){Object.keys(o).forEach((function(e){o[e]={autoLink:!1,required:ae(t[e])}}))}))},validate:y,validateField:u,mergeValidateInfo:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={autoLink:!1},a=[],r=Array.isArray(e)?e:[e],o=0;o<r.length;o++){var n=r[o];"error"===(null==n?void 0:n.validateStatus)&&(t.validateStatus="error",n.help&&a.push(n.help)),t.required=t.required||(null==n?void 0:n.required)}return t.help=a.join("\n"),t},clearValidate:function(e){(e?Array.isArray(e)?e:[e]:Object.keys(t)).forEach((function(e){o[e]&&te(o[e],{validateStatus:"",help:""})}))}}}var le=y({name:"SchemaFormCheckbox",components:{[O.name]:O,[j.name]:j,[_.name]:_,[O.Group.name]:O.Group},emits:["update:value"],props:{formItem:{type:Object,default:()=>({})},value:void 0},setup:(e,{attrs:t,emit:a})=>({modelValue:I({get:()=>e.value,set:e=>a("update:value",e)})})});le.render=function(e,t,a,r,o,n){const l=S("a-checkbox"),u=S("a-col"),i=S("a-row"),s=S("a-checkbox-group");return w(),V(s,k({value:e.modelValue,"onUpdate:value":t[1]||(t[1]=t=>e.modelValue=t),style:{width:"100%"}},F(e.formItem.eventObject)),{default:x((()=>[A(i,null,{default:x((()=>[(w(!0),V(P,null,E(e.formItem.options,(e=>(w(),V(u,{key:e.value,span:8},{default:x((()=>[A(l,{value:e.value},{default:x((()=>[T(R(e.label),1)])),_:2},1032,["value"])])),_:2},1024)))),128))])),_:1})])),_:1},16,["value"])};var ue=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:le}),ie=y({name:"SchemaFormInputNumber",components:{[U.name]:U},emits:["update:value"],props:{formItem:{type:Object,default:()=>({})},value:void 0},setup:(e,{attrs:t,emit:a})=>({modelValue:I({get:()=>e.value,set:e=>a("update:value",e)})})});ie.render=function(e,t,a,r,o,n){const l=S("a-input-number");return w(),V(l,k({value:e.modelValue,"onUpdate:value":t[1]||(t[1]=t=>e.modelValue=t)},e.formItem.props,F(e.formItem.eventObject)),null,16,["value"])};var se=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ie}),me=y({name:"SchemaFormInput",components:{[C.name]:C},emits:["update:value"],props:{formItem:{type:Object,default:()=>({})},value:void 0},setup:(e,{attrs:t,emit:a})=>({modelValue:I({get:()=>e.value,set:e=>a("update:value",e)})})});me.render=function(e,t,a,r,o,n){const l=S("a-input");return w(),V(l,k({value:e.modelValue,"onUpdate:value":t[1]||(t[1]=t=>e.modelValue=t)},e.formItem.props,{autocomplete:"new-password"},F(e.formItem.eventObject)),null,16,["value"])};var ce=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:me}),fe=y({name:"SchemaFormRadio",components:{[M.name]:M,[M.Group.name]:M.Group},emits:["update:value"],props:{formItem:{type:Object,default:()=>({})},value:void 0},setup:(e,{attrs:t,emit:a})=>({modelValue:I({get:()=>e.value,set:e=>a("update:value",e)})})});fe.render=function(e,t,a,r,o,n){const l=S("a-radio"),u=S("a-radio-group");return w(),V(u,k({value:e.modelValue,"onUpdate:value":t[1]||(t[1]=t=>e.modelValue=t)},F(e.formItem.eventObject)),{default:x((()=>[(w(!0),V(P,null,E(e.formItem.options,(e=>(w(),V(l,{key:e.value,value:e.value},{default:x((()=>[T(R(e.label),1)])),_:2},1032,["value"])))),128))])),_:1},16,["value"])};var de=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:fe}),pe=y({name:"SchemaFormSelect",components:{[L.name]:L,[L.Option.name]:L.Option},emits:["update:value"],props:{formItem:{type:Object,default:()=>({})},value:void 0},setup:(e,{attrs:t,emit:a})=>({modelValue:I({get:()=>e.value,set:e=>a("update:value",e)})})});pe.render=function(e,t,a,r,o,n){const l=S("Option"),u=S("a-select");return w(),V(u,k({value:e.modelValue,"onUpdate:value":t[1]||(t[1]=t=>e.modelValue=t)},e.formItem.props,F(e.formItem.eventObject)),{default:x((()=>[(w(!0),V(P,null,E(e.formItem.options,(e=>(w(),V(l,{key:e.value,value:e.value},{default:x((()=>[T(R(e.label),1)])),_:2},1032,["value"])))),128))])),_:1},16,["value"])};var ve=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:pe}),ge=y({name:"SchemaFormTextarea",components:{[q.name]:q},emits:["update:value"],props:{formItem:{type:Object,default:()=>({})},value:void 0},setup:(e,{attrs:t,emit:a})=>({modelValue:I({get:()=>e.value,set:e=>a("update:value",e)})})});ge.render=function(e,t,a,r,o,n){const l=S("a-switch");return w(),V(l,k({checked:e.modelValue,"onUpdate:checked":t[1]||(t[1]=t=>e.modelValue=t)},e.formItem.props,F(e.formItem.eventObject)),null,16,["checked"])};var be=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ge}),he=y({name:"SchemaFormTextarea",components:{[C.TextArea.name]:C.TextArea},emits:["update:value"],props:{formItem:{type:Object,default:()=>({})},value:void 0},setup:(e,{attrs:t,emit:a})=>({modelValue:I({get:()=>e.value,set:e=>a("update:value",e)})})});he.render=function(e,t,a,r,o,n){const l=S("a-textarea");return w(),V(l,k({value:e.modelValue,"onUpdate:value":t[1]||(t[1]=t=>e.modelValue=t)},e.formItem.props,F(e.formItem.eventObject)),null,16,["value"])};const ye={"./schema-form-checkbox.vue":ue,"./schema-form-input-number.vue":se,"./schema-form-input.vue":ce,"./schema-form-radio.vue":de,"./schema-form-select.vue":ve,"./schema-form-switch.vue":be,"./schema-form-textarea.vue":Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:he})},Oe={};Object.keys(ye).forEach((e=>{const t=e.replace(/(.*\/)*([^.]+).*/gi,"$2");Oe[t]=ye[e].default}));var je,_e,Ie=y({name:"DynamicForm",components:(je=u({},Oe),_e={[z.name]:z,[$.name]:$,[$.Item.name]:$.Item},t(je,a(_e))),props:{formSchema:{required:!0,type:Object},fields:{type:Object,default:()=>({})}},setup(e,t){const a=D(null),r=G(),o=u({labelCol:{span:4},wrapperCol:{span:20}},e.formSchema.formItemLayout),n=s(e.formSchema.formItem.reduce(((e,t)=>(null!=t.eventObject||(t.eventObject={}),e[t.field]=t.value,e)),{}));e.fields&&Object.assign(n,e.fields),e.formSchema.formItem.forEach((async e=>{(null==e?void 0:e.hasOwnProperty("loading"))&&(e.loading=!0),H(e.asyncOptions)||J(e.asyncOptions)?e.options=await e.asyncOptions(e,r).finally((()=>e.loading=!1)):(H(e.asyncValue)||J(e.asyncValue))&&(n[e.field]=await e.asyncValue(e,r).finally((()=>e.loading=!1)))}));const l=s(e.formSchema.formItem.filter((e=>!e.hidden)).reduce(((e,t)=>(t.rules&&(e[t.field]=t.rules),e)),{})),{resetFields:i,validate:m,validateInfos:c,validateField:f}=ne(n,l),d=["input","textarea","select","radio","checkbox","input-number","input-range","switch"],p=({field:e,trigger:t})=>()=>m(e,{trigger:t}).catch((()=>({})));return{formItemLayout:o,validate:m,resetFields:i,validateField:f,validateInfos:c,modelRef:n,schemaFormRef:a,getTriggerEvent:e=>{var t,a;const r={},o=e.field;if(Array.isArray(e.rules))e.rules.forEach((e=>{Array.isArray(e.trigger)?e.trigger.forEach((e=>r[e]=p({field:o,trigger:e}))):K(e.trigger)&&(r[e.trigger]=p({field:o,trigger:e.trigger}))}));else if(null==(t=e.rules)?void 0:t.trigger){const t=null==(a=e.rules)?void 0:a.trigger;r[t]=p({field:o,trigger:t}),Array.isArray(t)?t.forEach((e=>r[e]=p({field:o,trigger:e}))):K(t)&&(r[t]=p({field:o,trigger:t}))}return r},getComponent:e=>d.includes(e)?"schema-form-"+e:Y(e)||B(e)?A(e):e}}});const Se=N(),we=Se(((e,t,a,r,o,n)=>{const l=S("a-form-item"),i=S("a-spin"),s=S("a-form");return w(),V(s,k({ref:"schemaFormRef"},e.formItemLayout),{default:Se((()=>[(w(!0),V(P,null,E(e.formSchema.formItem.filter((e=>!e.hidden)),((t,a)=>(w(),V(i,{key:t.field,spinning:t.loading||!1},{default:Se((()=>[A(l,k({help:t.help,extra:t.extra,label:t.label},u(u({},t.props),e.validateInfos[t.field])),{default:Se((()=>[(w(),V(W(e.getComponent(t.type)),k({value:e.modelRef[t.field],"onUpdate:value":a=>e.modelRef[t.field]=a,"form-item":t},F(u({},e.getTriggerEvent(t)))),null,16,["value","onUpdate:value","form-item"]))])),_:2},1040,["help","extra","label"])])),_:2},1032,["spinning"])))),128)),e.$slots["operate-button"]?(w(),V(l,{key:0,"wrapper-col":{span:e.formItemLayout.wrapperCol.span,offset:e.formItemLayout.labelCol.span}},{default:Se((()=>[X(e.$slots,"operate-button",{},void 0,!0)])),_:3},8,["wrapper-col"])):Z("",!0)])),_:1},16)}));Ie.render=we,Ie.__scopeId="data-v-10c082b4";export{Ie as _};
