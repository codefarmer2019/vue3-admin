var e,t=Object.defineProperty,a=Object.defineProperties,r=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,i=(e,a,r)=>a in e?t(e,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[a]=r;import{d as n,r as c,l as d,m as p,k as m,M as u,f,aE as b,A as y,c as g,e as w,B as h,i as v}from"./vendor.c1c0e565.js";import{_ as x}from"./dynamic-table.bf7909c0.js";import{A as D,R as I}from"./index.73ccbe68.js";import{f as S}from"./common.8f5395bc.js";import{u as j}from"./index.dcdac307.js";import"./schema-form.4595d7ea.js";function C(t){return D.request({url:e.adminDictConfig,method:I.GET,params:t})}function O(t){return D.request({url:[e.adminDictConfig,t].join("/"),method:I.DELETE},{isShowErrorMessage:!0,successMessageText:"删除成功"})}(e||(e={})).adminDictConfig="/admin/dict_config";const T=[{title:"ID",dataIndex:"id"},{title:"label值",dataIndex:"label"},{title:"分类",dataIndex:"category"},{title:"描述",dataIndex:"description"},{title:"创建时间",dataIndex:"updatedAt",slots:{customRender:"createdAt"},slotsType:"format",slotsFunc:e=>S(e)},{title:"最后更新时间",dataIndex:"updatedAt",slots:{customRender:"updatedAt"},slotsType:"format",slotsFunc:e=>S(e)},{title:"操作",dataIndex:"action",width:200,slots:{customRender:"action"},actions:[{type:"popconfirm",text:"删除",permission:{action:"delete",effect:"disabled"},props:{type:"danger"},func:async({record:e},t)=>await O(e.id).then((()=>t()))},{type:"button",text:"编辑",permission:{action:"update",effect:"disabled"},props:{type:"warning"},func:({record:t},a)=>j({title:"编辑字典",fields:t,formSchema:{formItem:[{type:"input",label:"label值",field:"label",value:"",props:{placeholder:"请输入label值"},rules:[{required:!0,message:"label值不能为空"}]},{type:"input",label:"分类",field:"category",value:"",props:{placeholder:"请输入分类"},rules:[{required:!0,message:"分类不能为空"}]},{type:"textarea",label:"描述",field:"description",value:"",props:{placeholder:"描述信息"}}]},handleOk:async(r,s)=>{return await(o=t.id,l=r,D.request({url:[e.adminDictConfig,o].join("/"),method:I.PATCH,params:l},{isShowErrorMessage:!0,successMessageText:"修改成功"})).then((e=>a()));var o,l}})}]}];var R=n({name:"SystemDict",components:{DynamicTable:x},setup(){const t=c(null),n=d({tableLoading:!1,rowSelection:{onChange:(e,t)=>{n.rowSelection.selectedRowKeys=e},selectedRowKeys:[]}}),y=p((()=>0==n.rowSelection.selectedRowKeys.length));return g=((e,t)=>{for(var a in t||(t={}))o.call(t,a)&&i(e,a,t[a]);if(s)for(var a of s(t))l.call(t,a)&&i(e,a,t[a]);return e})({},m(n)),a(g,r({columns:T,tableRef:t,getAdminDictConfig:C,isDisabled:y,addItem:()=>{j({title:"添加字典",formSchema:{formItem:[{type:"input",label:"label值",field:"label",value:"",props:{placeholder:"请输入label值"},rules:[{required:!0,message:"label值不能为空"}]},{type:"input",label:"分类",field:"category",value:"",props:{placeholder:"请输入分类"},rules:[{required:!0,message:"分类不能为空"}]},{type:"textarea",label:"描述",field:"description",value:"",props:{placeholder:"描述信息"}}]},handleOk:async(a,r)=>{var s;await(s=a,D.request({url:e.adminDictConfig,method:I.POST,params:s},{isShowErrorMessage:!0,successMessageText:"创建成功"})),t.value.refreshTableData()}})},deleteItems:()=>{u.confirm({title:"提示",icon:f(b),content:"您确定要删除所有选中吗？",onOk:async()=>{await O(n.rowSelection.selectedRowKeys.toString()),t.value.refreshTableData(),n.rowSelection.selectedRowKeys=[]}})}}));var g}});const A=v(" 新增字典 "),E=v(" 删除 ");R.render=function(e,t,a,r,s,o){const l=y("a-button"),i=y("dynamic-table");return g(),w(i,{ref:"tableRef",columns:e.columns,"get-list-func":e.getAdminDictConfig,rowKey:"id","row-selection":e.rowSelection},{title:h((()=>[f(l,{type:"primary",onClick:e.addItem},{default:h((()=>[A])),_:1},8,["onClick"]),f(l,{disabled:e.isDisabled,type:"primary",onClick:e.deleteItems},{default:h((()=>[E])),_:1},8,["disabled","onClick"])])),_:1},8,["columns","get-list-func","row-selection"])};export default R;
