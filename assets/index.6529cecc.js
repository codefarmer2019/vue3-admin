var e,t=Object.defineProperty,a=Object.defineProperties,r=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,i=(e,a,r)=>a in e?t(e,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[a]=r;import{d as n,r as d,l as c,m as p,k as m,M as u,f,aC as b,A as y,bh as g,c as w,e as h,B as v,w as x,i as D}from"./vendor.b5e2da0f.js";import{_ as I}from"./form-modal.86785163.js";import{A as S,R as j}from"./index.5e885673.js";import{f as C}from"./common.f4229f54.js";import{u as O}from"./index.cf61ca1e.js";import"./schema-form.51d8cbd5.js";function T(t){return S.request({url:e.adminDictConfig,method:j.GET,params:t})}function R(t){return S.request({url:[e.adminDictConfig,t].join("/"),method:j.DELETE},{isShowErrorMessage:!0,successMessageText:"删除成功"})}(e||(e={})).adminDictConfig="/admin/dict_config";const A=[{title:"ID",dataIndex:"id"},{title:"label值",dataIndex:"label"},{title:"分类",dataIndex:"category"},{title:"描述",dataIndex:"description"},{title:"创建时间",dataIndex:"updatedAt",slots:{customRender:"createdAt"},slotsType:"format",slotsFunc:e=>C(e)},{title:"最后更新时间",dataIndex:"updatedAt",slots:{customRender:"updatedAt"},slotsType:"format",slotsFunc:e=>C(e)},{title:"操作",dataIndex:"action",width:200,slots:{customRender:"action"},actions:[{type:"popconfirm",text:"删除",permission:{action:"delete",effect:"disabled"},props:{type:"danger"},func:async({record:e},t)=>await R(e.id).then((()=>t()))},{type:"button",text:"编辑",permission:{action:"update",effect:"disabled"},props:{type:"warning"},func:({record:t},a)=>O({title:"编辑字典",fields:t,formSchema:{formItem:[{type:"input",label:"label值",field:"label",value:"",props:{placeholder:"请输入label值"},rules:[{required:!0,message:"label值不能为空"}]},{type:"input",label:"分类",field:"category",value:"",props:{placeholder:"请输入分类"},rules:[{required:!0,message:"分类不能为空"}]},{type:"textarea",label:"描述",field:"description",value:"",props:{placeholder:"描述信息"}}]},handleOk:async(r,s)=>{return await(o=t.id,l=r,S.request({url:[e.adminDictConfig,o].join("/"),method:j.PATCH,params:l},{isShowErrorMessage:!0,successMessageText:"修改成功"})).then((e=>a()));var o,l}})}]}];var k=n({name:"SystemDict",components:{DynamicTable:I},setup(){const t=d(null),n=c({tableLoading:!1,rowSelection:{onChange:(e,t)=>{n.rowSelection.selectedRowKeys=e},selectedRowKeys:[]}}),y=p((()=>0==n.rowSelection.selectedRowKeys.length));return g=((e,t)=>{for(var a in t||(t={}))o.call(t,a)&&i(e,a,t[a]);if(s)for(var a of s(t))l.call(t,a)&&i(e,a,t[a]);return e})({},m(n)),a(g,r({columns:A,tableRef:t,getAdminDictConfig:T,isDisabled:y,addItem:()=>{O({title:"添加字典",formSchema:{formItem:[{type:"input",label:"label值",field:"label",value:"",props:{placeholder:"请输入label值"},rules:[{required:!0,message:"label值不能为空"}]},{type:"input",label:"分类",field:"category",value:"",props:{placeholder:"请输入分类"},rules:[{required:!0,message:"分类不能为空"}]},{type:"textarea",label:"描述",field:"description",value:"",props:{placeholder:"描述信息"}}]},handleOk:async(a,r)=>{var s;await(s=a,S.request({url:e.adminDictConfig,method:j.POST,params:s},{isShowErrorMessage:!0,successMessageText:"创建成功"})),t.value.refreshTableData()}})},deleteItems:()=>{u.confirm({title:"提示",icon:f(b),content:"您确定要删除所有选中吗？",onOk:async()=>{await R(n.rowSelection.selectedRowKeys.toString()),t.value.refreshTableData(),n.rowSelection.selectedRowKeys=[]}})}}));var g}});const q=D(" 新增字典 "),E=D(" 删除 ");k.render=function(e,t,a,r,s,o){const l=y("a-button"),i=y("dynamic-table"),n=g("permission");return w(),h(i,{ref:"tableRef",columns:e.columns,"get-list-func":e.getAdminDictConfig,rowKey:"id","row-selection":e.rowSelection},{title:v((()=>[x(f(l,{type:"primary",onClick:e.addItem},{default:v((()=>[q])),_:1},8,["onClick"]),[[n,{action:"create",effect:"disabled"}]]),x(f(l,{disabled:e.isDisabled,type:"primary",onClick:e.deleteItems},{default:v((()=>[E])),_:1},8,["disabled","onClick"]),[[n,{action:"delete"}]])])),_:1},8,["columns","get-list-func","row-selection"])};export default k;
