var e,t=Object.defineProperty,a=Object.prototype.hasOwnProperty,s=Object.getOwnPropertySymbols,o=Object.prototype.propertyIsEnumerable,r=(e,a,s)=>a in e?t(e,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[a]=s,l=(e,t)=>{for(var l in t||(t={}))a.call(t,l)&&r(e,l,t[l]);if(s)for(var l of s(t))o.call(t,l)&&r(e,l,t[l]);return e};import{ct as i,cu as n,d,r as c,S as p,U as u,t as m,ab as f,c as b,Y as y,z as g,A as h,a4 as w,a3 as x}from"./index.5c76cdb4.js";import{_ as v}from"./dynamic-table.6a44a42b.js";import{f as I}from"./common.6e04ae74.js";import{u as S}from"./index.7fbe521f.js";import{Q as C}from"./QuestionCircleOutlined.1cae268d.js";import"./vendor.183d7d35.js";import"./schema-form.cdddfeb7.js";function D(t){return i.request({url:e.adminDictConfig,method:n.GET,params:t})}function j(t){return i.request({url:[e.adminDictConfig,t].join("/"),method:n.DELETE},{isShowErrorMessage:!0,successMessageText:"删除成功"})}(e||(e={})).adminDictConfig="/admin/dict_config";const T=[{title:"ID",dataIndex:"id"},{title:"label值",dataIndex:"label"},{title:"分类",dataIndex:"category"},{title:"描述",dataIndex:"description"},{title:"创建时间",dataIndex:"updatedAt",slots:{customRender:"createdAt"},slotsType:"format",slotsFunc:e=>I(e)},{title:"最后更新时间",dataIndex:"updatedAt",slots:{customRender:"updatedAt"},slotsType:"format",slotsFunc:e=>I(e)},{title:"操作",dataIndex:"action",width:200,slots:{customRender:"action"},actions:[{type:"popconfirm",text:"删除",permission:{action:"delete",effect:"disabled"},props:{type:"danger"},func:async({record:e},t)=>await j(e.id).then((()=>t()))},{type:"button",text:"编辑",permission:{action:"update",effect:"disabled"},props:{type:"warning"},func:({record:t},a)=>S({title:"编辑字典",fields:t,formSchema:{formItem:[{type:"input",label:"label值",field:"label",value:"",props:{placeholder:"请输入label值"},rules:[{required:!0,message:"label值不能为空"}]},{type:"input",label:"分类",field:"category",value:"",props:{placeholder:"请输入分类"},rules:[{required:!0,message:"分类不能为空"}]},{type:"textarea",label:"描述",field:"description",value:"",props:{placeholder:"描述信息"}}]},handleOk:async(s,o)=>{return await(r=t.id,l=s,i.request({url:[e.adminDictConfig,r].join("/"),method:n.PATCH,params:l},{isShowErrorMessage:!0,successMessageText:"修改成功"})).then((e=>a()));var r,l}})}]}];var O=d({name:"system-dict",components:{DynamicTable:v},setup(){const t=c(null),a=p({tableLoading:!1,rowSelection:{onChange:(e,t)=>{a.rowSelection.selectedRowKeys=e},selectedRowKeys:[]}}),s=u((()=>0==a.rowSelection.selectedRowKeys.length));return l(l({},m(a)),{columns:T,tableRef:t,getAdminDictConfig:D,isDisabled:s,addItem:()=>{S({title:"添加字典",formSchema:{formItem:[{type:"input",label:"label值",field:"label",value:"",props:{placeholder:"请输入label值"},rules:[{required:!0,message:"label值不能为空"}]},{type:"input",label:"分类",field:"category",value:"",props:{placeholder:"请输入分类"},rules:[{required:!0,message:"分类不能为空"}]},{type:"textarea",label:"描述",field:"description",value:"",props:{placeholder:"描述信息"}}]},handleOk:async(a,s)=>{var o;await(o=a,i.request({url:e.adminDictConfig,method:n.POST,params:o},{isShowErrorMessage:!0,successMessageText:"创建成功"})),t.value.refreshTableData()}})},deleteItems:()=>{f.confirm({title:"提示",icon:b(C),content:"您确定要删除所有选中吗？",onOk:async()=>{await j(a.rowSelection.selectedRowKeys.toString()),t.value.refreshTableData(),a.rowSelection.selectedRowKeys=[]}})}})}});const R=x(" 新增字典 "),q=x(" 删除 ");O.render=function(e,t,a,s,o,r){const l=y("a-button"),i=y("dynamic-table");return g(),h(i,{ref:"tableRef",columns:e.columns,"get-list-func":e.getAdminDictConfig,rowKey:"id","row-selection":e.rowSelection},{title:w((()=>[b(l,{onClick:e.addItem,type:"primary"},{default:w((()=>[R])),_:1},8,["onClick"]),b(l,{onClick:e.deleteItems,disabled:e.isDisabled,type:"primary"},{default:w((()=>[q])),_:1},8,["onClick","disabled"])])),_:1},8,["columns","get-list-func","row-selection"])};export default O;
