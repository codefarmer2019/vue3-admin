var e,t=Object.assign;import{cx as a,cy as s,d as l,r as o,S as i,U as r,t as n,aa as d,c,Z as m,z as p,A as u,a5 as f,a2 as b}from"./index.c2de4877.js";import{_ as y}from"./dynamic-table.cd5d68ec.js";import{f as g}from"./common.dd914d5e.js";import{u as h}from"./index.ce42e1a8.js";import{Q as w}from"./QuestionCircleOutlined.7b1eb37b.js";import"./vendor.183d7d35.js";import"./schema-form.05eb43a4.js";function x(t){return a.request({url:e.adminDictConfig,method:s.GET,params:t})}function C(t){return a.request({url:[e.adminDictConfig,t].join("/"),method:s.DELETE},{isShowErrorMessage:!0,successMessageText:"删除成功"})}(e||(e={})).adminDictConfig="/admin/dict_config";const D=[{title:"ID",dataIndex:"id"},{title:"label值",dataIndex:"label"},{title:"分类",dataIndex:"category"},{title:"描述",dataIndex:"description"},{title:"创建时间",dataIndex:"updatedAt",slots:{customRender:"createdAt"},slotsType:"format",slotsFunc:e=>g(e)},{title:"最后更新时间",dataIndex:"updatedAt",slots:{customRender:"updatedAt"},slotsType:"format",slotsFunc:e=>g(e)},{title:"操作",dataIndex:"action",width:200,slots:{customRender:"action"},actions:[{type:"popconfirm",text:"删除",permission:{action:"delete",effect:"disabled"},props:{type:"danger"},func:async({record:e},t)=>await C(e.id).then((()=>t()))},{type:"button",text:"编辑",permission:{action:"update",effect:"disabled"},props:{type:"warning"},func:({record:t},l)=>h({title:"编辑字典",fields:t,formSchema:{formItem:[{type:"input",label:"label值",field:"label",value:"",props:{placeholder:"请输入label值"},rules:[{required:!0,message:"label值不能为空"}]},{type:"input",label:"分类",field:"category",value:"",props:{placeholder:"请输入分类"},rules:[{required:!0,message:"分类不能为空"}]},{type:"textarea",label:"描述",field:"description",value:"",props:{placeholder:"描述信息"}}]},handleOk:async(o,i)=>{return await(r=t.id,n=o,a.request({url:[e.adminDictConfig,r].join("/"),method:s.PATCH,params:n},{isShowErrorMessage:!0,successMessageText:"修改成功"})).then((e=>l()));var r,n}})}]}];var I=l({name:"system-dict",components:{DynamicTable:y},setup(){const l=o(null),m=i({tableLoading:!1,rowSelection:{onChange:(e,t)=>{m.rowSelection.selectedRowKeys=e},selectedRowKeys:[]}}),p=r((()=>0==m.rowSelection.selectedRowKeys.length));return t(t({},n(m)),{columns:D,tableRef:l,getAdminDictConfig:x,isDisabled:p,addItem:()=>{h({title:"添加字典",formSchema:{formItem:[{type:"input",label:"label值",field:"label",value:"",props:{placeholder:"请输入label值"},rules:[{required:!0,message:"label值不能为空"}]},{type:"input",label:"分类",field:"category",value:"",props:{placeholder:"请输入分类"},rules:[{required:!0,message:"分类不能为空"}]},{type:"textarea",label:"描述",field:"description",value:"",props:{placeholder:"描述信息"}}]},handleOk:async(t,o)=>{var i;await(i=t,a.request({url:e.adminDictConfig,method:s.POST,params:i},{isShowErrorMessage:!0,successMessageText:"创建成功"})),l.value.refreshTableData()}})},deleteItems:()=>{d.confirm({title:"提示",icon:c(w),content:"您确定要删除所有选中吗？",onOk:async()=>{await C(m.rowSelection.selectedRowKeys.toString()),l.value.refreshTableData(),m.rowSelection.selectedRowKeys=[]}})}})}});const S=b(" 新增字典 "),v=b(" 删除 ");I.render=function(e,t,a,s,l,o){const i=m("a-button"),r=m("dynamic-table");return p(),u(r,{ref:"tableRef",columns:e.columns,"get-list-func":e.getAdminDictConfig,rowKey:"id","row-selection":e.rowSelection},{title:f((()=>[c(i,{onClick:e.addItem,type:"primary"},{default:f((()=>[S])),_:1},8,["onClick"]),c(i,{onClick:e.deleteItems,disabled:e.isDisabled,type:"primary"},{default:f((()=>[v])),_:1},8,["onClick","disabled"])])),_:1},8,["columns","get-list-func","row-selection"])};export default I;
